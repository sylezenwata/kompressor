!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Kompressor",[],t):"object"==typeof exports?exports.Kompressor=t():e.Kompressor=t()}(self,(function(){return function(){"use strict";var e={d:function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.d(t,{default:function(){return r}});var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"low",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2;n(this,e),this.width=t,this.height=o,this.xOrigin=r,this.yOrigin=i,this.smoothingQuality=a,this.quality=u,this.formatsToOverride=["png","jpg"]}var t,r;return t=e,(r=[{key:"toBlob",value:function(e){var t=this;return new Promise((function(n){e.toBlob(n,"image/".concat(t.format),t.quality)}))}},{key:"compress",value:function(e){var t=this;return new Promise((function(n,o){var r=document.createElement("canvas"),i=r.getContext("2d");i||o(new Error("Canvas context is not availbale"));var a=t.width||e.naturalWidth,u=t.height||e.naturalHeight;r.width=a,r.height=u,i.imageSmoothingsmoothingQuality=t.smoothingQuality,i.save(),i.drawImage(e,t.xOrigin,t.yOrigin,a,u),i.restore(),t.toBlob(r).then((function(e){var t=URL.createObjectURL(e);n({url:t,blob:e})})).catch((function(e){console.log(e),o(new Error("Blob conversion failed"))}))}))}},{key:"setFormat",value:function(e){var t;e=null===(t=e)||void 0===t?void 0:t.toString().toLowerCase(),this.format=this.formatsToOverride.some((function(t){return t===e}))||!e?"jpeg":e}},{key:"process",value:function(e){var t=this;return new Promise((function(n,o){var r=new FileReader;r.addEventListener("load",(function(e){var r;t.setFormat(null===(r=e.target.result.split(";")[0])||void 0===r?void 0:r.split("/")[1]);var i=new Image;i.src=e.target.result,i.addEventListener("load",(function(){t.compress(i).then((function(e){return n(e)})).catch((function(e){return o(e)}))}))})),r.readAsDataURL(e)}))}},{key:"readableSize",value:function(e){return e/1024>1024?~~(10*e/1024/1024)/10+"MB":~~(e/1024)+"KB"}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();return t.default}()}));